# ğŸ™ï¸ ìŒì„± ë¹„ì„œ í”„ë¡œê·¸ë¨ (Voice Assistant Program)

![Python](https://img.shields.io/badge/Python-3.9+-blue.svg)
![Streamlit](https://img.shields.io/badge/Streamlit-1.28+-red.svg)
![OpenAI](https://img.shields.io/badge/OpenAI-API-green.svg)

ì‚¬ìš©ìì˜ ìŒì„±ì„ ì¸ì‹í•˜ì—¬ í…ìŠ¤íŠ¸ë¡œ ë³€í™˜(STT)í•˜ê³ , OpenAI GPT ëª¨ë¸ì„ í†µí•´ ë‹µë³€ì„ ìƒì„±í•˜ë©°, ë‹¤ì‹œ ìŒì„±ìœ¼ë¡œ ì½ì–´ì£¼ëŠ”(TTS) **AI ìŒì„± ë¹„ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜**ì…ë‹ˆë‹¤.

ì´ ë ˆí¬ì§€í† ë¦¬ì—ëŠ” ë‘ ê°€ì§€ ë²„ì „ì˜ ìŒì„± ë¹„ì„œê°€ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤:
1. **ê¸°ë³¸ ìŒì„± ë¹„ì„œ (`app.py`)**: ì¼ë°˜ì ì¸ ì§ˆì˜ì‘ë‹µì„ ìˆ˜í–‰í•˜ëŠ” ë²”ìš© ì¸ê³µì§€ëŠ¥ ë¹„ì„œ
2. **ì¼ìƒ ê¸°ë¶„ ê´€ë¦¬ ë¹„ì„œ (`app1.py`)**: ìš°ìš¸ê°ê³¼ ë¬´ê¸°ë ¥ì„ ëŠë¼ëŠ” ì‚¬ìš©ìì˜ ì¼ìƒê³¼ ì—…ë¬´ë¥¼ ë•ê³  ê³µê°í•´ì£¼ëŠ” íŠ¹í™” ë¹„ì„œ

---

## ğŸŒŸ ì£¼ìš” ê¸°ëŠ¥ (Features)

- **ğŸ™ï¸ ìŒì„± ì¸ì‹ (STT)**: OpenAIì˜ `Whisper` ëª¨ë¸ì„ í™œìš©í•˜ì—¬ ì‚¬ìš©ìì˜ ìŒì„±ì„ ë†’ì€ ì •í™•ë„ë¡œ í…ìŠ¤íŠ¸ ë³€í™˜
- **ğŸ¤– ì§€ëŠ¥í˜• ë‹µë³€ ìƒì„±**: ìµœì‹  `GPT-4o` / `GPT-4o-mini` ëª¨ë¸ì„ í™œìš©í•˜ì—¬ ë¬¸ë§¥ì„ ì´í•´í•˜ê³  ë‹µë³€ ì œê³µ
- **ğŸ”Š ìŒì„± í•©ì„± (TTS)**: êµ¬ê¸€ì˜ `gTTS`ë¥¼ í™œìš©í•˜ì—¬ ìƒì„±ëœ í…ìŠ¤íŠ¸ ë‹µë³€ì„ ìì—°ìŠ¤ëŸ¬ìš´ í•œêµ­ì–´ ìŒì„±ìœ¼ë¡œ ì¶œë ¥
- **ğŸ’¬ ì±„íŒ… UI**: Streamlit ì±— ê¸°ëŠ¥ì„ í™œìš©í•˜ì—¬ ëŒ€í™” ë‚´ì—­ì„ ë©”ì‹ ì € í˜•íƒœë¡œ ì§ê´€ì ìœ¼ë¡œ ì‹œê°í™”
- **âš™ï¸ ì»¤ìŠ¤í…€ ì„¤ì •**: ì™¼ìª½ ì‚¬ì´ë“œë°”ì—ì„œ ê°œì¸ OpenAI API í‚¤ ì…ë ¥ ë° GPT ëª¨ë¸ ì„ íƒ ê¸°ëŠ¥ ì§€ì›

---

## ğŸ“‚ íŒŒì¼ êµ¬ì¡° (Project Structure)

```text
ğŸ“¦ jiha-s-voice_assistant
 â”£ ğŸ“œ app.py             # ê¸°ë³¸ ìŒì„± ë¹„ì„œ ë©”ì¸ ì‹¤í–‰ íŒŒì¼
 â”£ ğŸ“œ app1.py            # ì§€í•˜ì˜ ì¼ìƒ ê¸°ë¶„ ê´€ë¦¬ ë¹„ì„œ (íŠ¹í™” ë²„ì „) íŒŒì¼
 â”£ ğŸ“œ requirements.txt   # Python ë¼ì´ë¸ŒëŸ¬ë¦¬ ì˜ì¡´ì„± ëª©ë¡
 â”£ ğŸ“œ packages.txt       # ë°°í¬ í™˜ê²½ìš© ì‹œìŠ¤í…œ íŒ¨í‚¤ì§€ (ì˜ˆ: ffmpeg ë“±)
 â”— ğŸ“œ runtime.txt        # ë°°í¬ í™˜ê²½ì˜ Python ëŸ°íƒ€ì„ ë²„ì „ ëª…ì‹œ
```

### ğŸ’¡ í•µì‹¬ ì½”ë“œ ë¡œì§ (Core Logic)

**1. ìŒì„±ì„ í…ìŠ¤íŠ¸ë¡œ ë³€í™˜ (STT - Speech to Text)**
```python
def STT(client: OpenAI, audio):
    filename = "input.mp3"
    audio.export(filename, format="mp3")

    with open(filename, "rb") as audio_file:
        transcript = client.audio.transcriptions.create(
            model="whisper-1",
            file=audio_file,
            language="ko",
        )
    os.remove(filename)
    return transcript.text
```

**2. GPT ëª¨ë¸ì„ í†µí•œ AI ë‹µë³€ ìƒì„± (Ask GPT)**
```python
def ask_gpt(client: OpenAI, prompt, model):
    response = client.chat.completions.create(
        model=model,
        messages=prompt
    )
    system_message = response.choices[0].message
    return system_message.content
```

**3. í…ìŠ¤íŠ¸ë¥¼ ìŒì„±ìœ¼ë¡œ ë³€í™˜ ë° ìë™ ì¬ìƒ (TTS - Text to Speech)**
```python
def TTS(response_text):
    filename = "output.mp3"
    tts = gTTS(text=response_text, lang="ko")
    tts.save(filename)

    with open(filename, "rb") as f:
        data = f.read()
        b64 = base64.b64encode(data).decode()
        md = f"""
            <audio autoplay="True" controls>
            <source src="data:audio/mp3;base64,{b64}" type="audio/mp3">
            </audio>
            """
        st.markdown(md, unsafe_allow_html=True)
    os.remove(filename)
```

---

## ğŸ› ï¸ íŠ¹í™” í”„ë¡¬í”„íŠ¸: ì¼ìƒ ê¸°ë¶„ ê´€ë¦¬ ë¹„ì„œ (`app1.py`)

`app1.py`ëŠ” ë‹¨ìˆœí•œ ì§ˆì˜ì‘ë‹µì„ ë„˜ì–´ ì‚¬ìš©ìì˜ ê°ì •ì— ê³µê°í•˜ê³  ì•ˆì •ì„ ë•ê¸° ìœ„í•´ ì•„ë˜ì™€ ê°™ì€ ì²´ê³„ì ì¸ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

```text
ë„ˆëŠ” ìš°ìš¸ê°ì´ë‚˜ ë¬´ê¸°ë ¥ì„ ëŠë¼ëŠ” ì‚¬ìš©ìì˜ ì¼ìƒê³¼ ì—…ë¬´ë¥¼ ë•ëŠ” ìŒì„± ë¹„ì„œë‹¤.

ì›ì¹™:
- ì˜í•™ì  ì§„ë‹¨, ì¹˜ë£Œ, ì•½ë¬¼ì— ëŒ€í•œ ì¡°ì–¸ì€ í•˜ì§€ ì•ŠëŠ”ë‹¤.
- ì‚¬ìš©ìë¥¼ í‰ê°€í•˜ê±°ë‚˜ í›ˆê³„í•˜ì§€ ì•ŠëŠ”ë‹¤.
- ê°•ìš”í•˜ì§€ ì•Šê³  ì„ íƒê¶Œì„ ì¡´ì¤‘í•œë‹¤.

ëŒ€í™” ë°©ì‹:
- ë¨¼ì € ê³µê° ë¬¸ì¥ì„ 1ë¬¸ì¥ ë§í•œë‹¤.
- ë‹µë³€ì€ ì „ì²´ 2~4ë¬¸ì¥ ì´ë‚´ë¡œ ì§§ê²Œ í•œë‹¤.
- í•œ ë²ˆì— ì œì•ˆí•˜ëŠ” í–‰ë™ì€ ì•„ì£¼ ì‘ì€ ê²ƒ 1ê°œë§Œ ì œì‹œí•œë‹¤.
- ì§ˆë¬¸ì´ í•„ìš”í•˜ë©´ ì˜ˆ/ì•„ë‹ˆì˜¤ë¡œ ë‹µí•  ìˆ˜ ìˆê²Œ ë¬»ëŠ”ë‹¤.
```

---

## ğŸš€ ì„¤ì¹˜ ë° ì‹¤í–‰ ë°©ë²• (How to Run)

**1. ë ˆí¬ì§€í† ë¦¬ í´ë¡ **
```bash
git clone https://github.com/jiha-hub/jiha-s-voice_assistant.git
cd jiha-s-voice_assistant
```

**2. í•„ìˆ˜ ì‹œìŠ¤í…œ íŒ¨í‚¤ì§€ ì„¤ì¹˜**
ì´ í”„ë¡œì íŠ¸ëŠ” ì˜¤ë””ì˜¤ ì²˜ë¦¬ë¥¼ ìœ„í•´ ë‚´ë¶€ì ìœ¼ë¡œ `pydub`ì„ ì‚¬ìš©í•˜ë¯€ë¡œ, OS í™˜ê²½ì— ë”°ë¼ `ffmpeg` íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•´ì•¼ í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. 
> Streamlit Cloud ë°°í¬ ì‹œ `packages.txt`ì— `ffmpeg` ë“±ì´ ì‘ì„±ë˜ì–´ ìˆë‹¤ë©´ ìë™ìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

**3. íŒŒì´ì¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜**
```bash
pip install -r requirements.txt
```

**4. ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰**
ê¸°ë³¸ ìŒì„± ë¹„ì„œë¥¼ ì‹¤í–‰í•˜ë ¤ë©´:
```bash
streamlit run app.py
```
ì¼ìƒ ê¸°ë¶„ ê´€ë¦¬ ë¹„ì„œë¥¼ ì‹¤í–‰í•˜ë ¤ë©´:
```bash
streamlit run app1.py
```

### ğŸ—ï¸ ì‚¬ìš© íŒ
- ì•± ì‹¤í–‰ í›„ **ì™¼ìª½ íŒ¨ë„**ì˜ ë¹„ë°€ë²ˆí˜¸ ë°•ìŠ¤ì— ë³¸ì¸ì˜ `OpenAI API Key (sk-...)`ë¥¼ ì…ë ¥í•´ì•¼ ì •ìƒ ì‘ë™í•©ë‹ˆë‹¤.
- ì™¸ë¶€ë¡œ í‚¤ê°€ ìœ ì¶œë˜ì§€ ì•Šë„ë¡ í™”ë©´ìƒì— `password` í˜•íƒœë¡œ ìˆ¨ê²¨ì ¸ ì…ë ¥ë©ë‹ˆë‹¤.
- í•œê¸€, íŠ¹ìˆ˜ë¬¸ì, `Bearer` ë“±ì˜ ë¶ˆí•„ìš”í•œ ë‹¨ì–´ê°€ í¬í•¨ë  ê²½ìš° ìë™ìœ¼ë¡œ ì—ëŸ¬ë¥¼ ê°ì§€í•˜ì—¬ íŠ•ê²¨ëƒ…ë‹ˆë‹¤.
